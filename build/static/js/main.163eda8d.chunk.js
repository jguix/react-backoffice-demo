(this["webpackJsonpredux-normalized-example"]=this["webpackJsonpredux-normalized-example"]||[]).push([[0],{13:function(e,t,n){},37:function(e,t,n){e.exports=n(69)},42:function(e,t,n){},43:function(e,t,n){},49:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),o=n(17),u=n.n(o),i=(n(42),n(43),n(7)),l=n(5),s=n(6),m=n(1);!function(e){e.LOAD_PRODUCTS="LOAD_PRODUCTS",e.LOAD_PRODUCT="LOAD_PRODUCT",e.SAVE_PRODUCT="SAVE_PRODUCT",e.UPDATE_PRODUCT="UPDATE_PRODUCT",e.DELETE_PRODUCT="DELETE_PRODUCT",e.CLEAR_PRODUCTS="CLEAR_PRODUCTS"}(a||(a={}));var d,f=function(){return{type:a.CLEAR_PRODUCTS}},p=function(e){return{payload:e,type:a.LOAD_PRODUCTS}},E=function(e){return{payload:e,type:a.LOAD_PRODUCT}},O=function(e){return{payload:e,type:a.SAVE_PRODUCT}},b=function(e){return{payload:e,type:a.UPDATE_PRODUCT}},v=function(e){return{payload:e,type:a.DELETE_PRODUCT}},h=Object(l.b)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_PRODUCTS:var n=t,c=n.payload,r=c.products,o=r.reduce((function(e,t){return Object(m.a)({},e,Object(s.a)({},t.id,t))}),{});return Object(m.a)({},e,{},o);case a.LOAD_PRODUCT:var u=t,i=u.payload,l=i.product;return Object(m.a)({},e,Object(s.a)({},l.id,l));case a.SAVE_PRODUCT:var d=t,f=d.payload,p=f.productId,E=f.product;return Object(m.a)({},e,Object(s.a)({},p,Object(m.a)({},E,{id:p})));case a.UPDATE_PRODUCT:var O=t,b=O.payload,v=b.product;return Object(m.a)({},e,Object(s.a)({},v.id,Object(m.a)({},v)));case a.DELETE_PRODUCT:var h=t,g=h.payload,j=g.productId,T=Object(m.a)({},e);return delete T[j],Object(m.a)({},T)}return e}});!function(e){e.LOAD_CUSTOMERS="LOAD_CUSTOMERS",e.LOAD_CUSTOMER="LOAD_CUSTOMER",e.SAVE_CUSTOMER="SAVE_CUSTOMER",e.UPDATE_CUSTOMER="UPDATE_CUSTOMER",e.DELETE_CUSTOMER="DELETE_CUSTOMER",e.CLEAR_CUSTOMERS="CLEAR_CUSTOMERS"}(d||(d={}));var g,j=function(){return{type:d.CLEAR_CUSTOMERS}},T=function(e){return{payload:e,type:d.LOAD_CUSTOMERS}},C=function(e){return{payload:e,type:d.LOAD_CUSTOMER}},S=function(e){return{payload:e,type:d.SAVE_CUSTOMER}},U=function(e){return{payload:e,type:d.UPDATE_CUSTOMER}},y=function(e){return{payload:e,type:d.DELETE_CUSTOMER}},N=Object(l.b)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.LOAD_CUSTOMERS:var n=t,a=n.payload,c=a.customers,r=c.reduce((function(e,t){return Object(m.a)({},e,Object(s.a)({},t.id,t))}),{});return Object(m.a)({},e,{},r);case d.LOAD_CUSTOMER:var o=t,u=o.payload,i=u.customer;return Object(m.a)({},e,Object(s.a)({},i.id,i));case d.SAVE_CUSTOMER:var l=t,f=l.payload,p=f.customerId,E=f.customer;return Object(m.a)({},e,Object(s.a)({},p,Object(m.a)({},E,{id:p})));case d.UPDATE_CUSTOMER:var O=t,b=O.payload,v=b.customer;return Object(m.a)({},e,Object(s.a)({},v.id,Object(m.a)({},v)));case d.DELETE_CUSTOMER:var h=t,g=h.payload,j=g.customerId,T=Object(m.a)({},e);return delete T[j],Object(m.a)({},T)}return e}}),L=n(12),_=function(e,t,n){return n.indexOf(e)===t},D=function(e){return e.filter(_)},R=Object(l.b)({customerIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.LOAD_CUSTOMERS:var n=t,a=n.payload,c=a.customers,r=c.map((function(e){return e.id}));return D([].concat(Object(L.a)(e),Object(L.a)(r)));case d.DELETE_CUSTOMER:var o=t,u=o.payload,i=u.customerId;return Object(L.a)(e.filter((function(e){return e!==i})));case d.CLEAR_CUSTOMERS:return[]}return e}}),A=Object(l.b)({productIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.LOAD_PRODUCTS:var n=t,c=n.payload,r=c.products,o=r.map((function(e){return e.id}));return D([].concat(Object(L.a)(e),Object(L.a)(o)));case a.DELETE_PRODUCT:var u=t,i=u.payload,l=i.productId;return Object(L.a)(e.filter((function(e){return e!==l})));case a.CLEAR_PRODUCTS:return[]}return e}});!function(e){e.AUTH_LOGIN="AUTH_LOGIN",e.AUTH_LOGOUT="AUTH_LOGOUT"}(g||(g={}));var P=function(e){return{payload:e,type:g.AUTH_LOGIN}},I=function(){return{type:g.AUTH_LOGOUT}},k=Object(l.b)({customers:N,products:h}),w=Object(l.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,token:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.AUTH_LOGIN:var n=t,a=n.payload,c=a.token;return{isAuthenticated:!0,token:c};case g.AUTH_LOGOUT:return{isAuthenticated:!1,token:""}}return e},customerList:R,productList:A}),M=Object(l.b)({entities:k,ui:w}),x=Object(l.c)(M),F=n(4),B=n(2),H=n(36),G=function(e){var t=e.component,n=Object(H.a)(e,["component"]);return Object(i.b)((function(e){return e.ui.auth.isAuthenticated}))?r.a.createElement(B.b,Object.assign({},n,{component:t})):r.a.createElement(B.b,Object.assign({},n,{render:function(){return r.a.createElement(B.a,{to:"/login"})}}))},V=function(){return new Promise((function(e){x.dispatch(P({token:"1234567890"})),e()}))},J=function(){return new Promise((function(e){x.dispatch(I()),e()}))},W=(n(49),function(){var e=Object(B.g)();return r.a.createElement("div",{className:"loginPage"},r.a.createElement("div",{className:"loginContent"},r.a.createElement("div",{className:"boTitle"},"backoffice"),r.a.createElement("div",{className:"loginForm"},r.a.createElement("form",null,r.a.createElement("div",{className:"loginTitle"},"Start Session"),r.a.createElement("div",{className:"loginLabel"},r.a.createElement("label",null,"Email")),r.a.createElement("input",{className:"loginField",type:"text",name:"username"}),r.a.createElement("div",{className:"loginLabel"},r.a.createElement("label",null,"Password")),r.a.createElement("input",{className:"loginField",type:"password",name:"password"}),r.a.createElement("button",{className:"loginButton",onClick:function(){V().then((function(){return e.push("/")}))}},"Login")))))}),z=n(3),q=n(10),Q=n.n(q),$=function(e){return Q.a.delete("/customers/".concat(e)).then((function(){}))},K=function(e){return Q.a.get("/customers/".concat(e)).then((function(e){return e.data}))},X=function(e,t,n){return Q.a.get("/customers?_page=".concat(e,"&_limit=").concat(t,"&_sort=name&_order=").concat(n)).then((function(e){return e.data}))},Y=function(e){return Q.a.post("/customers",e).then((function(e){return e.data}))},Z=function(e){return Q.a.put("/customers/".concat(e.id,"/"),e).then((function(e){return e.data}))},ee=function(e,t){return x.getState().ui.customerList.customerIds.length>=e*t},te=function(e){return!!x.getState().entities.customers.byId[e]},ne=function(){return new Promise((function(e,t){x.dispatch(j()),e()}))},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(c,r){!a&&ee(e,t)?c():X(e,t,n).then((function(e){x.dispatch(T({customers:e})),c()}),(function(e){console.log(e),r()}))}))},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,a){!t&&te(e)?n():K(e).then((function(e){x.dispatch(C({customer:e})),n()}),(function(e){console.log(e),a()}))}))},re=function(e){return new Promise((function(t,n){Y(e).then((function(n){x.dispatch(S({customerId:n,customer:e})),t()}),(function(e){console.log(e),n()}))}))},oe=function(e){return new Promise((function(t,n){Z(e).then((function(){x.dispatch(U({customer:e})),t()}),(function(e){console.log(e),n()}))}))},ue=function(e){return new Promise((function(t,n){$(e).then((function(n){x.dispatch(y({customerId:e})),t()}),(function(e){console.log(e),n()}))}))},ie=(n(13),function(e){var t=e.customer;return r.a.createElement("div",{className:"listItem"},r.a.createElement(F.b,{key:t.id,to:"/customer/".concat(t.id)},r.a.createElement("div",{className:"listTitle"},t.name),r.a.createElement("div",{className:"listText"},t.email),r.a.createElement("div",{className:"listText"},t.address)))}),le=(n(67),function(e){var t=e.title,n=e.backgroundImageUrl,a=void 0===n?"http://lorempixel.com/1500/1000":n;return r.a.createElement("div",{className:"pageHeader"},r.a.createElement("img",{className:"pageImage",src:a}),r.a.createElement("div",{className:"pageTitle"},t))}),se=function(){var e=Object(B.g)(),t=Object(i.b)((function(e){var t=e.ui.customerList.customerIds;return null===t||void 0===t?void 0:t.map((function(t){return e.entities.customers.byId[t]}))})),n=Object(c.useState)(!1),a=Object(z.a)(n,2),o=a[0],u=a[1],l=Object(c.useState)(!1),s=Object(z.a)(l,2),m=s[0],d=s[1],f=Object(c.useState)(1),p=Object(z.a)(f,2),E=p[0],O=p[1];Object(c.useEffect)((function(){u(!0),1===E&&ne(),ae(E,10).then((function(){return u(!1)}),(function(){return d(!0)}))}),[E]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{title:"Customers",backgroundImageUrl:"https://bit.ly/33sx3Vu"}),r.a.createElement("div",{className:"page"},r.a.createElement("button",{onClick:function(){return e.push("/customer")}},"Create customer"),o&&!(null===t||void 0===t?void 0:t.length)&&r.a.createElement("div",null,"Loading customers..."),m&&r.a.createElement("div",null,"Error loading customers, please refresh page."),r.a.createElement("div",{className:"list"},null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(ie,{key:e.id,customer:e})}))),(null===t||void 0===t?void 0:t.length)>0&&r.a.createElement("div",null,o?r.a.createElement("div",null,"Loading customers..."):r.a.createElement("button",{onClick:function(){return O(E+1)}},"Load next ",10))))},me=function(e){return Q.a.delete("/products/".concat(e)).then((function(){}))},de=function(e){return Q.a.get("/products/".concat(e)).then((function(e){return e.data}))},fe=function(e,t,n){return Q.a.get("/products?_page=".concat(e,"&_limit=").concat(t,"&_sort=name&_order=").concat(n)).then((function(e){return e.data}))},pe=function(e){return Q.a.post("/products",e).then((function(e){return e.data}))},Ee=function(e){return Q.a.put("/products/".concat(e.id,"/"),e).then((function(e){return e.data}))},Oe=function(e,t){return x.getState().ui.productList.productIds.length>=e*t},be=function(e){return!!x.getState().entities.products.byId[e]},ve=function(){return new Promise((function(e,t){x.dispatch(f()),e()}))},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(c,r){!a&&Oe(e,t)?c():fe(e,t,n).then((function(e){x.dispatch(p({products:e})),c()}),(function(e){console.log(e),r()}))}))},ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,a){!t&&be(e)?n():de(e).then((function(e){x.dispatch(E({product:e})),n()}),(function(e){console.log(e),a()}))}))},je=function(e){return new Promise((function(t,n){pe(e).then((function(n){x.dispatch(O({productId:n,product:e})),t()}),(function(e){console.log(e),n()}))}))},Te=function(e){return new Promise((function(t,n){Ee(e).then((function(){x.dispatch(b({product:e})),t()}),(function(e){console.log(e),n()}))}))},Ce=function(e){return new Promise((function(t,n){me(e).then((function(n){x.dispatch(v({productId:e})),t()}),(function(e){console.log(e),n()}))}))},Se=function(e){var t=e.product;return r.a.createElement("div",{className:"listItem"},r.a.createElement(F.b,{key:t.id,to:"/product/".concat(t.id)},r.a.createElement("div",{className:"listTitle"},t.name),r.a.createElement("div",{className:"listText"},t.price," \u20ac")))},Ue=function(){var e=Object(B.g)(),t=Object(i.b)((function(e){var t=e.ui.productList.productIds;return null===t||void 0===t?void 0:t.map((function(t){return e.entities.products.byId[t]}))})),n=Object(c.useState)(!1),a=Object(z.a)(n,2),o=a[0],u=a[1],l=Object(c.useState)(!1),s=Object(z.a)(l,2),m=s[0],d=s[1],f=Object(c.useState)(1),p=Object(z.a)(f,2),E=p[0],O=p[1];Object(c.useEffect)((function(){u(!0),1===E&&ve(),he(E,10).then((function(){return u(!1)}),(function(){return d(!0)}))}),[E]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{title:"Products",backgroundImageUrl:"https://images.unsplash.com/photo-1501851602203-f40cf2f11ba9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"}),r.a.createElement("div",{className:"page"},r.a.createElement("button",{onClick:function(){return e.push("/product")}},"Create product"),o&&!(null===t||void 0===t?void 0:t.length)&&r.a.createElement("div",null,"Loading products..."),m&&r.a.createElement("div",null,"Error loading products, please refresh page."),r.a.createElement("div",{className:"list"},null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(Se,{key:e.id,product:e})}))),(null===t||void 0===t?void 0:t.length)>0&&r.a.createElement("div",null,o?r.a.createElement("div",null,"Loading products..."):r.a.createElement("button",{onClick:function(){return O(E+1)}},"Load next ",10))))},ye=function(){var e=Object(B.g)(),t=Object(B.h)().id,n=t&&parseInt(t)||void 0,a=Object(i.b)((function(e){return n&&e.entities.customers.byId[n]||void 0})),o=Object(c.useState)(!1),u=Object(z.a)(o,2),l=u[0],d=u[1],f=Object(c.useState)(),p=Object(z.a)(f,2),E=p[0],O=p[1],b=Object(c.useState)(!1),v=Object(z.a)(b,2),h=v[0],g=v[1],j=Object(c.useState)({address:"",email:"",name:""}),T=Object(z.a)(j,2),C=T[0],S=T[1];Object(c.useEffect)((function(){n&&(U(!0,"Loading customer..."),ce(n).then((function(){return U(!1)}),(function(){return g(!0)})))}),[n]),Object(c.useEffect)((function(){a&&S(a)}),[a]);var U=function(e,t){d(e),t&&O(t)},y=function(e){var t=e.target.name,n=e.target.value;C&&S(Object(m.a)({},C,Object(s.a)({},t,n)))},N=function(){return e.goBack()},L=function(){return e.push("/customers")};return!0===l?r.a.createElement("div",null,E):h?r.a.createElement("div",null,"Error loading customer, please refresh page."):r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{title:"Edit Customer",backgroundImageUrl:"https://bit.ly/33uC3J9"}),C&&r.a.createElement("form",{className:"pageForm",onSubmit:function(){a?(U(!0,"Updating customer..."),C&&oe(C).then((function(){return U(!1)}),(function(){return g(!0)})).then(N)):(U(!0,"Saving customer..."),C&&re(C).then((function(){return U(!1)}),(function(){return g(!0)})).then(N))}},C.id&&r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Id")),r.a.createElement("input",{className:"formInput",type:"text",value:C.id,disabled:!0})),r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Name")),r.a.createElement("input",{className:"formInput",type:"text",name:"name",value:C.name,onChange:y})),r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Email")),r.a.createElement("input",{className:"formInput",type:"text",name:"email",value:C.email,onChange:y})),r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Address")),r.a.createElement("input",{className:"formInput",type:"text",name:"address",value:C.address,onChange:y})),r.a.createElement("button",{className:"formButton",type:"submit"},"Save"),n&&r.a.createElement("button",{className:"formButton",onClick:function(){U(!0,"Deleting customer..."),a&&ue(a.id).then((function(){return U(!1)}),(function(){return g(!0)})).then(L)}},"Delete")))},Ne=(n(68),function(){var e=Object(B.g)();return Object(i.b)((function(e){return e.ui.auth.isAuthenticated}))?r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"headerTitle"},"backoffice"),r.a.createElement("div",{className:"headerNavigation"},r.a.createElement("div",{className:"headerNavigationItem"},r.a.createElement(F.b,{className:"buttonLink",to:"/customers"},"Customers")),r.a.createElement("div",{className:"headerNavigationItem"},r.a.createElement(F.b,{className:"buttonLink",to:"/products"},"Products")),r.a.createElement("div",{className:"headerNavigationItem"},r.a.createElement("button",{className:"buttonLink",onClick:function(){J().then((function(){return e.push("/login")}))}},"Logout")))):r.a.createElement(r.a.Fragment,null)}),Le=function(){var e=Object(B.g)(),t=Object(B.h)().id,n=t&&parseInt(t)||void 0,a=Object(i.b)((function(e){return n&&e.entities.products.byId[n]||void 0})),o=Object(c.useState)(!1),u=Object(z.a)(o,2),l=u[0],d=u[1],f=Object(c.useState)(),p=Object(z.a)(f,2),E=p[0],O=p[1],b=Object(c.useState)(!1),v=Object(z.a)(b,2),h=v[0],g=v[1],j=Object(c.useState)({name:"",photo:"",price:0}),T=Object(z.a)(j,2),C=T[0],S=T[1];Object(c.useEffect)((function(){n&&(U(!0,"Loading product..."),ge(n).then((function(){return U(!1)}),(function(){return g(!0)})))}),[n]),Object(c.useEffect)((function(){a&&S(a)}),[a]);var U=function(e,t){d(e),t&&O(t)},y=function(e){var t=e.target.name,n=e.target.value;C&&S(Object(m.a)({},C,Object(s.a)({},t,n)))},N=function(){return e.goBack()},L=function(){return e.push("/products")};return!0===l?r.a.createElement("div",null,E):h?r.a.createElement("div",null,"Error loading product, please refresh page."):r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{title:"Edit Product",backgroundImageUrl:"https://bit.ly/2GyBHs6"}),C&&r.a.createElement("form",{className:"pageForm",onSubmit:function(){a?(U(!0,"Updating product..."),C&&Te(C).then((function(){return U(!1)}),(function(){return g(!0)})).then(N)):(U(!0,"Saving product..."),C&&je(C).then((function(){return U(!1)}),(function(){return g(!0)})).then(N))}},C.id&&r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Id")),r.a.createElement("input",{className:"formInput",type:"text",value:C.id,disabled:!0})),r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Name")),r.a.createElement("input",{className:"formInput",type:"text",name:"name",value:C.name,onChange:y})),r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Price")),r.a.createElement("input",{className:"formInput",type:"text",name:"price",value:C.price,onChange:y})),r.a.createElement("div",{className:"formField"},r.a.createElement("div",{className:"formLabel"},r.a.createElement("label",null,"Photo")),r.a.createElement("input",{className:"formInput",type:"text",name:"photo",value:C.photo,onChange:y})),r.a.createElement("button",{className:"formButton",type:"submit"},"Save"),n&&r.a.createElement("button",{className:"formButton",onClick:function(){U(!0,"Deleting product..."),a&&Ce(a.id).then((function(){return U(!1)}),(function(){return g(!0)})).then(L)}},"Delete")))},_e=function(){return r.a.createElement(i.a,{store:x},r.a.createElement(F.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"appContent"},r.a.createElement(Ne,null),r.a.createElement(B.d,null,r.a.createElement(B.b,{exact:!0,path:"/login",component:W}),r.a.createElement(G,{path:"/customers",component:se}),r.a.createElement(G,{path:"/customer/:id",component:ye}),r.a.createElement(G,{path:"/customer",exact:!0,component:ye}),r.a.createElement(G,{path:"/products",component:Ue}),r.a.createElement(G,{path:"/product/:id",component:Le}),r.a.createElement(G,{path:"/product",exact:!0,component:Le}),r.a.createElement(B.a,{from:"/",to:"/customers"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.163eda8d.chunk.js.map